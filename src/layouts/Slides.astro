---
import "@styles/global.css";
import "@fontsource-variable/hanken-grotesk";
import "@fontsource-variable/source-sans-3";
import "highlight.js/styles/base16/one-light.css";
import "reveal.js/dist/reveal.css";
import "reveal.js/dist/theme/black.css";

import Head, { type Props as HeadProps } from "@components/Head.astro";

export type Props = HeadProps;
---

<!doctype html>
<html lang="de" transition:animate="none">
  <Head {...Astro.props} />
  <body>
    <div class="reveal" slot="body">
      <div class="slides">
        <slot />
      </div>
    </div>
  </body>
</html>

<script>
  import Reveal from "reveal.js";
  import Highlight from "reveal.js/plugin/highlight/highlight.esm";
  import Markdown from "reveal.js/plugin/markdown/markdown.esm";
  import Search from "reveal.js/plugin/search/search.esm";
  import Notes from "reveal.js/plugin/notes/notes.esm";
  import Math from "reveal.js/plugin/math/math.esm";
  import Zoom from "reveal.js/plugin/zoom/zoom.esm";

  Reveal.initialize({
    controlsTutorial: false,
    slideNumber: "c/t",
    hash: true,
    history: true,
    hideCursorTime: 2000,
    pdfSeparateFragments: false,
    plugins: [Highlight, Markdown, Search, Notes, Math, Zoom],
  });
</script>

<style is:global>
  .fragment.mark,
  .fragment.mark-current {
    background-image: linear-gradient(
      var(--r-selection-background-color),
      var(--r-selection-background-color)
    );
    background-size: 0% 100%;
    background-position-y: 100%;
    background-position-x: 100%;
    background-repeat: no-repeat;
    transition-property: background-size, color;
    color: var(--r-main-color);
  }

  .fragment.mark.visible,
  .fragment.mark-current.current-fragment {
    background-size: 100% 100%;
    background-position-x: 0%;
    color: var(--r-selection-color);
  }

  .section {
    user-select: none;
  }
  .section:hover {
    user-select: text;
  }

  .slide-number {
    user-select: none;
  }

  .slide-background-content {
    filter: blur(8px);
  }

  .reveal-viewport {
    background: rgb(var(--color-background)) !important;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-family-layout) !important;
    text-shadow: 0 0 300px rgba(var(--color-text), 0.3) !important;
    text-transform: unset !important;
  }

  h1 {
    font-weight: 800 !important;
    line-height: 1em !important;
    letter-spacing: -0.02em !important;
  }

  a {
    color: unset !important;
    transition: background-size var(--duration-short) !important;
  }
</style>
